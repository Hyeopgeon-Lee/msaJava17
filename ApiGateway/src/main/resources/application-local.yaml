management:
  endpoints:
    web:
      exposure:
        include: '*'
  endpoint:
    health:
      enabled: true
      show-details: always
    beans:
      enabled: true
    info:
      enabled: true
    shutdown:
      enabled: true

spring:
  application:
    name: API-GATEWAY
  # application.yml (ApiGateway)
  cloud:
    gateway:
      # (A) ëª¨ë“  ë¼ìš°íŠ¸ ê³µí†µ í•„í„°
      default-filters:
        # í˜¹ì‹œ ë‚¨ì•„ë„ëŠ” ì¤‘ë³µì„ 1ê°œë¡œ ì •ë¦¬(ê²Œì´íŠ¸ì›¨ì´ê°€ ë¶™ì¸ ì²« ê°’ ìœ ì§€)
        - DedupeResponseHeader=Access-Control-Allow-Credentials Access-Control-Allow-Origin Access-Control-Expose-Headers, RETAIN_FIRST

      # (B) ì „ì—­ CORS (ê²Œì´íŠ¸ì›¨ì´ ì „ë‹´)
      globalcors:
        add-to-simple-url-handler-mapping: false
        corsConfigurations:
          '[/**]':
            allowedOrigins:
              - "http://localhost:14000"
              - "http://127.0.0.1:14000"
            allowedMethods: [ "GET","POST","PUT","PATCH","DELETE","OPTIONS" ]
            allowedHeaders: [ "*" ]
            exposedHeaders: [ "Location","Content-Disposition","Authorization" ]
            allowCredentials: true
            maxAge: 3600


jwt:
  token:
    access:
      valid:
        time: '300'
      name: jwtAccessToken
    refresh:
      valid:
        time: '3000'
      name: jwtRefreshToken
  creator: poly
  secret:
    key: '12345678123456781234567812345678123456781234'

server:
  port: '9000'

api:
  server:
    user:
      protocol: http
      host: localhost
      port: 9001
      refresh-endpoint: /login/v1/refresh
    notice:
      protocol: http
      host: localhost
      port: 9002

security:
  public-paths:
    - /login/**
    - /reg/**
    - /notice/v1/noticeList
    - /notice/v1/noticeInfo
    - /v3/api-docs/**
    - /swagger-ui/**
    - /swagger-ui.html
    - /actuator/**


logging:
  level:
    org.springframework.security.oauth2.server.resource: DEBUG
    org.springframework.cloud.gateway: INFO      # í•„ìš” ì‹œ DEBUGë¡œ

app:
  cors:
    # ğŸ’¡ ì—¬ëŸ¬ ì˜¤ë¦¬ì§„ì´ í•„ìš”í•˜ë©´ ì½¤ë§ˆë¡œ ì¶”ê°€: http://localhost:14000,http://127.0.0.1:14000
    allowed-origins: http://localhost:14000
